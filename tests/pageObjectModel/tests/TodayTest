import TodayPage from "../pages/TodayPage"
import LoginPageAuth from "../pages/LoginPageAuth"
import { fixture, test } from "testcafe"
import AddNewTaskPage from "../pages/AddNewTaskPage"
import { CREDENTIALS, URLS } from "../data/Constants"

fixture("Today page")
  .page(URLS.LOGIN_URL)
  .beforeEach(async (t) => {
    LoginPageAuth.setUserName(CREDENTIALS.STANDARD_USER.USERNAME)
    LoginPageAuth.setPassword(CREDENTIALS.STANDARD_USER.PASSWORD)
    LoginPageAuth.clickOnLoginButton()

    await t.wait(5000)
  })

test("7. Loading Today Page", async (t) => {
  await t
    .expect(URLS.getUrl())
    .contains(URLS.TODAY_URL)
    .expect(TodayPage.todayHeader.exists)
    //.expect(TodayPage.topMenuBar.exists)
    .ok()
})

test("8. Add TASK", async (t) => {
  await t.expect(AddNewTaskPage.addTaskSign.exists)
  AddNewTaskPage.clickOnAddTaskSign()
  t.expect(AddNewTaskPage.modalAddBox.exists)
  AddNewTaskPage.taskNameInput("ttttt")
  AddNewTaskPage.taskDescriptionInput("dddddd")
  AddNewTaskPage.clickOnAddTaskBtn()
})
